{% extends 'base.html' %}
{% block title %}Checkout - AgriConnect{% endblock %}

{% block content %}
<h1 class="page-title" style="text-align: center; margin-top: 1rem">ðŸ›’ Checkout</h1>

<form method="POST" action="{{ url_for('place_order') }}" style="max-width: 800px; margin: auto;">
  <!-- ðŸ§¾ Cart Summary -->
  <div class="products-container">
    {% for item in cart %}
    <div class="product-card">
      <img src="{{ url_for('static', filename=item.image) }}" alt="{{ item.name }}" />
      <h3>{{ item.name }}</h3>
      <p>Price: â‚¹{{ item.price }}</p>

      <div class="quantity-control">
        <a href="{{ url_for('update_cart', cart_id=item._id, action='dec') }}" class="qty-btn">âž–</a>
        <span class="qty">{{ item.quantity }}</span>
        <a href="{{ url_for('update_cart', cart_id=item._id, action='inc') }}" class="qty-btn">âž•</a>
      </div>

      <p><strong>Total:</strong> â‚¹{{ item.price * item.quantity }}</p>
    </div>
    {% endfor %}
  </div>

  <!-- ðŸ’³ Bill Summary -->
  <div class="checkout-summary">
    <h2>ðŸ§¾ Bill Summary</h2>
    <p>Subtotal: â‚¹{{ subtotal }}</p>
    <p>Tax (5%): â‚¹{{ tax }}</p>
    <p><strong>Grand Total: â‚¹{{ grandtotal }}</strong></p>
  </div>

  <!-- ðŸšš Shipping Details -->
  <div class="auth-box">
    <h2>Shipping Details</h2>
    <label>Full Name</label>
    <input type="text" name="full_name" required />

    <label>Phone</label>
    <input type="text" name="phone" required />

    <label>Address</label>
    <textarea name="address" required></textarea>

    <label>City</label>
    <input type="text" name="city" required />

    <label>State</label>
    <input type="text" name="state" required />

    <label>Pincode</label>
    <input type="text" name="pincode" required />
  </div>

  <!-- ðŸ’° Payment Method -->
  <div class="checkout-payment">
    <h2>ðŸ’³ Payment Method</h2>
    <label><input type="radio" name="payment" value="cod" checked /> Cash on Delivery</label><br>
    <label><input type="radio" name="payment" value="upi" /> UPI</label><br>
    <label><input type="radio" name="payment" value="card" /> Card</label><br>
  </div>

  <div style="text-align:center; margin-top:1.5rem;">
    <button type="submit" class="btn">âœ… Place Order</button>
  </div>
</form>
{% endblock %}
